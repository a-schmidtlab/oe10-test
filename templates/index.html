<!DOCTYPE html>
<html>
<head>
    <title>REUTERS Advanced Robotics - OE10 Control Panel</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .control-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }
        .section {
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 5px;
        }
        .button-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        button {
            padding: 10px;
            cursor: pointer;
        }
        .status-panel {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
        .slider {
            width: 100%;
            margin: 10px 0;
        }
        .center-button {
            grid-column: 2;
        }
    </style>
</head>
<body>
    <h1>OE10 Control Panel</h1>
    
    <div class="control-panel">
        <!-- Position Control Section -->
        <div class="section">
            <h2>Position Control</h2>
            <div>
                <label>Pan (0-360°): </label>
                <input type="number" id="panDegrees" min="0" max="360" value="0">
                <button onclick="moveTo()">Go To Position</button>
            </div>
            <div>
                <label>Tilt (-90 to +90°): </label>
                <input type="number" id="tiltDegrees" min="-90" max="90" value="0">
            </div>
        </div>

        <!-- Manual Pan Control -->
        <div class="section">
            <h2>Pan Control</h2>
            <div class="button-grid">
                <button onclick="panLeft()">◀ Left</button>
                <button onclick="panStop()" class="center-button">Stop</button>
                <button onclick="panRight()">Right ▶</button>
            </div>
            <div>
                <label>Pan Speed:</label>
                <input type="range" id="panSpeed" class="slider" min="0" max="100" value="50">
            </div>
        </div>

        <!-- Manual Tilt Control -->
        <div class="section">
            <h2>Tilt Control</h2>
            <div class="button-grid">
                <div></div>
                <button onclick="tiltUp()">▲ Up</button>
                <div></div>
                <div></div>
                <button onclick="tiltStop()">Stop</button>
                <div></div>
                <div></div>
                <button onclick="tiltDown()">▼ Down</button>
                <div></div>
            </div>
            <div>
                <label>Tilt Speed:</label>
                <input type="range" id="tiltSpeed" class="slider" min="0" max="100" value="50">
            </div>
        </div>
    </div>

    <!-- System Control Section -->
    <div class="section">
        <h2>System Control</h2>
        <button onclick="getStatus()">Get Status</button>
        <button onclick="getProtocolVersion()">Protocol Version</button>
        <button onclick="getSoftwareVersion()">Software Version</button>
        <button onclick="getDebugInfo()">Debug Info</button>
    </div>

    <!-- Status Display -->
    <div class="status-panel">
        <h2>Status</h2>
        <pre id="statusDisplay">No status information available</pre>
    </div>

    <script>
        // Utility function to update status display
        function updateStatus(data) {
            document.getElementById('statusDisplay').textContent = 
                typeof data === 'object' ? JSON.stringify(data, null, 2) : data;
        }

        // Position Control
        async function moveTo() {
            const pan = document.getElementById('panDegrees').value;
            const tilt = document.getElementById('tiltDegrees').value;
            const response = await fetch('/move', {
                method: 'POST',
                headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                body: `pan=${pan}&tilt=${tilt}`
            });
            const data = await response.json();
            updateStatus(data);
        }

        // Pan Control
        async function panLeft() {
            const response = await fetch('/pan_left', {method: 'POST'});
            const data = await response.json();
            updateStatus(data);
        }

        async function panRight() {
            const response = await fetch('/pan_right', {method: 'POST'});
            const data = await response.json();
            updateStatus(data);
        }

        async function panStop() {
            const response = await fetch('/pan_stop', {method: 'POST'});
            const data = await response.json();
            updateStatus(data);
        }

        // Tilt Control
        async function tiltUp() {
            const response = await fetch('/tilt_up', {method: 'POST'});
            const data = await response.json();
            updateStatus(data);
        }

        async function tiltDown() {
            const response = await fetch('/tilt_down', {method: 'POST'});
            const data = await response.json();
            updateStatus(data);
        }

        async function tiltStop() {
            const response = await fetch('/tilt_stop', {method: 'POST'});
            const data = await response.json();
            updateStatus(data);
        }

        // System Control
        async function getStatus() {
            const response = await fetch('/status');
            const data = await response.json();
            updateStatus(data);
        }

        async function getProtocolVersion() {
            const response = await fetch('/protocol_version');
            const data = await response.json();
            updateStatus(data);
        }

        async function getSoftwareVersion() {
            const response = await fetch('/software_version');
            const data = await response.json();
            updateStatus(data);
        }

        async function getDebugInfo() {
            const response = await fetch('/debug');
            const data = await response.json();
            updateStatus(data);
        }

        // Update status every 5 seconds
        setInterval(getStatus, 5000);
    </script>
</body>
</html> 